/*
 * Site header - CSS Grid layout
 * Mobile/Tablet: logo left, hamburger right, collapsible menu expands and pushes content downward
 * Desktop (800px+): logo left, nav items right
 */

.layout-area--header {
    background: var(--brand-dark);
	color: var(--brand-white);
    border-top: var(--stroke-width) solid var(--brand-white);
    padding: var(--spacing-unit) max(var(--spacing-unit), calc((100vw - var(--content-max-width)) / 2));
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-template-areas:
        "header-area--title  header-area--hamburger"
        "header-area--nav    header-area--nav";
	align-items: center;

    @media screen and (min-width: 800px) {
        grid-template-columns: auto 1fr;
        grid-template-areas: "header-area--title  header-area--nav";
    }
}

// Title / logo
.header-area--title {
    grid-area: header-area--title;
    display: grid;

    img {
        display: block;
        height: calc(1.5 * var(--spacing-unit));
        width: auto;
    }
}

// Hamburger menu button (mobile only)
.hamburger {
    grid-area: header-area--hamburger;
	display: flex;
	align-items: center;
	justify-content: flex-end;
	background: none;
	border: none;
	color: var(--brand-white);
	cursor: pointer;
	padding: 8px;
	-webkit-tap-highlight-color: transparent;
	
	// Safari fallback
	&:focus {
		outline: 2px solid var(--brand-yellow);
		outline-offset: 2px;
	}
	
	// Modern browsers - only keyboard focus
	&:focus:not(:focus-visible) {
		outline: none;
	}
	
	&:focus-visible {
		outline: 2px solid var(--brand-yellow);
		outline-offset: 2px;
	}

	@media screen and (min-width: 800px) {
		display: none;
	}
}

// Menu icon
.menu-icon {
	display: flex;
	align-items: center;
	justify-content: center;

	svg {
		display: block;
		overflow: visible;
		
		.line {
			stroke-width: calc(var(--stroke-width) * 100 / 30 / 2);
			stroke-linecap: round;
			stroke: var(--brand-white);
			transition: all 500ms;
		}

		.line--top {
			transform-origin: 26px 40px;
		}

		.line--middle {
			stroke-dasharray: 100 100;
		}

		.line--bottom {
			transform-origin: 26px 60px;
		}
	}
}

// When hamburger is active, animate to X
.hamburger.is-active .menu-icon svg {
	.line--top {
		transform: rotate(45deg);
	}
	
	.line--middle {
		stroke-dasharray: 1 100;
		stroke-dashoffset: -50;
	}
	
	.line--bottom {
		transform: rotate(-45deg);
	}
}

// When hamburger is active, show the menu
.header-area--nav.is-active .trigger {
	display: flex;
}

// Navigation area
.header-area--nav {
    grid-area: header-area--nav;

    // The actual menu
    .trigger {
        display: none;
        flex-direction: column;
        align-items: flex-end;
        gap: var(--spacing-unit);
        padding-top: var(--spacing-unit);

        @media screen and (min-width: 800px) {
            display: flex;
            flex-direction: row;
            justify-content: flex-end;
            padding-top: 0;
        }
    }

    .page-link {
        text-decoration: none;
        color: var(--brand-white);
        font-weight: bold;

        &:hover,
        &:focus {
            color: var(--brand-yellow);
            text-decoration: none;
        }
        
        // Safari fallback
        &:focus {
            outline: 2px solid var(--brand-yellow);
            outline-offset: 2px;
        }
        
        // Modern browsers - only keyboard focus
        &:focus:not(:focus-visible) {
            outline: none;
        }
        
        &:focus-visible {
            outline: 2px solid var(--brand-yellow);
            outline-offset: 2px;
        }
    }
}
